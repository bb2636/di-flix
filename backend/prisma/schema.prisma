generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  user_id    Int     @id @default(autoincrement()) @map("user_id")
  email      String  @unique 
  password   String?
  is_member  Boolean @default(false)
  is_deleted Boolean @default(true)

  watchHistories WatchHistory[]  // 추가
  wishlists      Wishlist[]      // 추가
}

model Category {
  category_id   Int    @id @default(autoincrement())
  category_name String

  contents Content[]   // 추가
}

model Content {
  movie_id     Int       @id @default(autoincrement())
  title        String    @db.VarChar(255)
  description  String?   @db.Text
  category_id  Int? 
  views        Int       @default(0)

  category     Category? @relation(fields: [category_id], references: [category_id])

  watchHistories WatchHistory[]
  wishlists      Wishlist[]
}

model WatchHistory {
  history_id Int      @id @default(autoincrement())
  user_id    Int?
  movie_id   Int?

  user   User?    @relation(fields: [user_id], references: [user_id])
  movie  Content? @relation(fields: [movie_id], references: [movie_id])

  timestamp DateTime @default(now())
}

model Wishlist {
  wishlist_id Int     @id @default(autoincrement())
  user_id     Int?
  movie_id    Int?

  user   User?    @relation(fields: [user_id], references: [user_id])
  movie  Content? @relation(fields: [movie_id], references: [movie_id])
}
